<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="angular,问题，面试," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="之前在知乎上看过一个问题  

如何衡量一个人的 AngularJS 水平？ https://www.zhihu.com/question/36040694

感觉自己也用了快一年了，但是很多会用答不上来，吓得我赶紧打开我的项目，发现我用angularjs啦，难道我遇见假的angularjs了。而且用完就忘了，开此贴特来记录一些问题和坑！">
<meta property="og:type" content="article">
<meta property="og:title" content="angularjs问题总结">
<meta property="og:url" content="https://mayufo.github.io/2017/04/01/angularjs问题总结/index.html">
<meta property="og:site_name" content="mayufo">
<meta property="og:description" content="之前在知乎上看过一个问题  

如何衡量一个人的 AngularJS 水平？ https://www.zhihu.com/question/36040694

感觉自己也用了快一年了，但是很多会用答不上来，吓得我赶紧打开我的项目，发现我用angularjs啦，难道我遇见假的angularjs了。而且用完就忘了，开此贴特来记录一些问题和坑！">
<meta property="og:updated_time" content="2017-04-05T06:39:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="angularjs问题总结">
<meta name="twitter:description" content="之前在知乎上看过一个问题  

如何衡量一个人的 AngularJS 水平？ https://www.zhihu.com/question/36040694

感觉自己也用了快一年了，但是很多会用答不上来，吓得我赶紧打开我的项目，发现我用angularjs啦，难道我遇见假的angularjs了。而且用完就忘了，开此贴特来记录一些问题和坑！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://mayufo.github.io/2017/04/01/angularjs问题总结/"/>





  <title> angularjs问题总结 | mayufo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">mayufo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://mayufo.github.io/2017/04/01/angularjs问题总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mayufo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mayufo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                angularjs问题总结
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-01T23:18:47+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/angular/" itemprop="url" rel="index">
                    <span itemprop="name">angular</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>之前在知乎上看过一个问题  </p>
<blockquote>
<p>如何衡量一个人的 AngularJS 水平？ <a href="https://www.zhihu.com/question/36040694" target="_blank" rel="external">https://www.zhihu.com/question/36040694</a></p>
</blockquote>
<p>感觉自己也用了快一年了，但是很多会用答不上来，吓得我赶紧打开我的项目，发现我用angularjs啦，难道我遇见假的angularjs了。而且用完就忘了，开此贴特来记录一些问题和坑！</p>
<a id="more"></a>
<h2 id="angular的数据采用什么机制？-详述原理"><a href="#angular的数据采用什么机制？-详述原理" class="headerlink" title="angular的数据采用什么机制？ 详述原理"></a>angular的数据采用什么机制？ 详述原理</h2><p>脏检测机制</p>
<p>angular在scope模型上设置了一个监听队列，用来监听数据变化并更新view。当绑定一个东西到view上时angular就会往$watch队列里插入一条$watch,用来检测它监听的model里面是否有变化的东西。当浏览器接收可以被angular content 处理的事件是，$digest循环就会触发，遍历所有$watch, 最后更新dom</p>
<p>举个例子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span> = <span class="string">'val=val+1'</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<p>click 时会产生一次更新的操作（至少触发两次$digest循环）</p>
<ul>
<li>按下按钮</li>
<li>浏览器接收一个事件，进入到angular context</li>
<li>$digest循环开始执行，查询每个$watch是否变化</li>
<li>由于监听$scope.val的$watch报告了变化，因此强制再执行一次$digest循环</li>
<li>新的$digest循环没有检测到变化</li>
<li>浏览器拿回控制器，更新$scope.val新值对应的dom</li>
</ul>
<p>$digest的循环上限是10次</p>
<h2 id="两个平级界面a和b-如果a触发一个时间，有哪些方式能让b知道，详述原理"><a href="#两个平级界面a和b-如果a触发一个时间，有哪些方式能让b知道，详述原理" class="headerlink" title="两个平级界面a和b,如果a触发一个时间，有哪些方式能让b知道，详述原理"></a>两个平级界面a和b,如果a触发一个时间，有哪些方式能让b知道，详述原理</h2><p>其实就是两个评级界面模块进行通信。有两种方式</p>
<ul>
<li><p>共用服务</p>
</li>
<li><p>基于事件</p>
</li>
<li><p>eventBus 事件发布和订阅的框架</p>
</li>
</ul>
<h3 id="共用服务"><a href="#共用服务" class="headerlink" title="共用服务"></a>共用服务</h3><p>在angular中，通过factory可以生成一个单例对象，在与需要通信的模块a和b中注入这个对象即可</p>
<h3 id="基于事件"><a href="#基于事件" class="headerlink" title="基于事件"></a>基于事件</h3><ul>
<li><p>借助父controller.在子controller中向父controller触发<code>$emit</code>事件，然后在父controller中监听<code>$on</code>事件，再广播<code>$broadcast</code>给子controller,这样通过事件携带参数，实现了数据经过父controller,在同级controller之间传播</p>
</li>
<li><p>借助$rootScope。每个angular应该默认一个根作用域<code>$rootScope</code>,根作用域位于最顶层，从它往下挂着各种作用域。所以，如果子控制器直接使用<code>$rootScope</code>广播和接收事件，那么久可以实现同级之间的通信</p>
</li>
</ul>
<h3 id="EventBus-事件发布、订阅总线"><a href="#EventBus-事件发布、订阅总线" class="headerlink" title="EventBus 事件发布、订阅总线"></a>EventBus 事件发布、订阅总线</h3><p>提供事件订阅，事件发布，事件解绑</p>
<p>将定义的事件和事件函数push到一个数组里面这个是事件订阅，当需要触发函数通过事件发布，完成后事件解绑</p>
<h2 id="一个angular应用应当如何良好的分层"><a href="#一个angular应用应当如何良好的分层" class="headerlink" title="一个angular应用应当如何良好的分层"></a>一个angular应用应当如何良好的分层</h2><ul>
<li>目录结构的划分</li>
</ul>
<p>如果是小型的文件类型，可以按照文件类型组织</p>
<p>css<br>js<br>  controller<br>  model<br>  services<br>  filters<br>  templates</p>
<p>但如果是规模较大的项目，最好按照业务模块划分</p>
<p>业务文件夹<br>最好还有个公共的common文件来存放公共的东西，比如抽出的组件，图片，css</p>
<ul>
<li>逻辑代码的划分</li>
</ul>
<p>作为一个mvvm框架，angular应用本身应该按照模型，视图模型，视图来划分</p>
<p>这里的逻辑代码的拆分，尽量让controller这一层很薄。提取共用的逻辑到service中，比如后台数据的请求，数据的共享和缓存，基于事件的模块间通信，提取共同的界面操作到directive中，提取共用的格式化造作到filter中</p>
<p>在复杂的应用中，也可以为实体建立对应的构造函数</p>
<h2 id="angular应用常用那些路由库，各自的区别"><a href="#angular应用常用那些路由库，各自的区别" class="headerlink" title="angular应用常用那些路由库，各自的区别"></a>angular应用常用那些路由库，各自的区别</h2><p>angular1.x中常用ngRoute 和 ui.router,还有一种为angular2设计的new router</p>
<p>ngRouter 是angular自带的angular模块，ui.router是第三方提供的模块</p>
<p>ui.router是基于state状态的，ngRouter是基于url的，ui.router模块具有强大的功能，主要体现在视图的嵌套方面</p>
<p>使用ui.router能够定义有明确父子关系的路由，并通过ui-view指令将子路由模板插入到父路由模板的<div ui-view=""></div>中去，从而实现视图嵌套。而在ngRouter中不能这样定义，如果同时在父子视图中使用的<div ng-view=""></div>会陷入死循环</p>
<h2 id="如果angular的directive规划一套全组件化体系，会遇到哪些挑战？"><a href="#如果angular的directive规划一套全组件化体系，会遇到哪些挑战？" class="headerlink" title="如果angular的directive规划一套全组件化体系，会遇到哪些挑战？"></a>如果angular的directive规划一套全组件化体系，会遇到哪些挑战？</h2><ul>
<li>对外暴露的接口是否满足不断变化的需求</li>
<li>能否做到一套组件化的细节例如disabled 默认值 css等细节的统一</li>
<li>能否做到统一的版本控制，当升级组件版本时，基础逻辑不会影响，做到兼容</li>
<li>及时fix bug</li>
</ul>
<h2 id="分属不同团队进行开发的angular应用，如果要做整合，会遇到哪些问题，如何解决"><a href="#分属不同团队进行开发的angular应用，如果要做整合，会遇到哪些问题，如何解决" class="headerlink" title="分属不同团队进行开发的angular应用，如果要做整合，会遇到哪些问题，如何解决"></a>分属不同团队进行开发的angular应用，如果要做整合，会遇到哪些问题，如何解决</h2><p>可能会遇到模块之间的冲突，一个在moduleA中，一个在moduleB中，导致两个module在会发生覆盖</p>
<p>最好在开发的时候就统一空间命名，避免冲突</p>
<h2 id="angular缺点有哪些？"><a href="#angular缺点有哪些？" class="headerlink" title="angular缺点有哪些？"></a>angular缺点有哪些？</h2><ul>
<li><p>约束性强学习成本高，对前端不友好</p>
</li>
<li><p>不利于seo, 一种解决的办法是对应正常用户的访问，响应angular,对于搜索引擎访问，响应针对seo的html页面</p>
</li>
<li><p>性能问题</p>
</li>
</ul>
<p>作为MVVM框架，因为实现了数据的双向绑定，对应大数组，复杂对象会存在性能问题</p>
<h2 id="优化angular应用性能的办法"><a href="#优化angular应用性能的办法" class="headerlink" title="优化angular应用性能的办法"></a>优化angular应用性能的办法</h2><ul>
<li><p>减少监控项 对不会变化的使用单向绑定 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;::yourModel&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>主动设置索引 指定track by， 无限滚动加载避免用<code>ng-repeat</code></p>
</li>
</ul>
<ul>
<li><p>降低渲染数量 设置分页，每次渲染有限的数量</p>
</li>
<li><p>数据扁平化 (对于树状结构，使用扁平化解构，构建一个map和梳妆数据，对数操作)</p>
</li>
</ul>
<h2 id="如何看待-controller-as-的语法"><a href="#如何看待-controller-as-的语法" class="headerlink" title="如何看待 controller as 的语法"></a>如何看待 controller as 的语法</h2><p>在1.2以前，view任何的绑定都是直接绑定$scope。使用controllerAs,不需要再注入$scope, controller 变成一个简单的js对象，一个更纯粹的viewModel</p>
<p>从源码实现上来看，controllerAs语法只是把controller这个对象的实例用as别名在$scope上创建一个属性</p>
<p>避免遇到angular作用域相关的一个坑（比如ng-if，会产生以及作用域的坑，其实也是js原型链继承中值类型继承的坑）使用controllerAs的话view上所有的字符都绑定在一个引用的属性上，就可以避免这个坑</p>
<p>不过不引入<code>$scope</code>会导致<code>$emit $broadcast $on $watch</code>等方法无法使用，这些个跟事件相关的操作可以封装起来统一处理，或者在单个controller中引入 $scope</p>
<h2 id="详述angular的依赖注入"><a href="#详述angular的依赖注入" class="headerlink" title="详述angular的依赖注入"></a>详述angular的依赖注入</h2><p>angular是通过构造函数的参数名字来推断依赖服务名称，通过toString来找到这个定义的function的字符串，然后用正则解析出其中的参数，再去依赖映射种渠道的对应的依赖，实例化之后传入</p>
<p>因为angular的inject是假设函数的参数名字就是依赖名字，如果去查找依赖项，代码压缩后，参数会重命名，就无法查找到依赖项</p>
<p>依赖注入写法<br>数组注释法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">myApp.controller(<span class="string">'myCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;])</div></pre></td></tr></table></figure></p>
<p>显示$inject<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myCtrl.$inject = [<span class="string">'$scope'</span>, <span class="string">'$http'</span>]</div></pre></td></tr></table></figure></p>
<p>对于依赖注入必须具备三个要素：依赖项的注册，依赖关系的声明和对象的获取，在angularjs中，module和$provide都可以提供依赖项的注入，内置的injector可以获取对象</p>
<h3 id="ng-if和ng-show区别"><a href="#ng-if和ng-show区别" class="headerlink" title="ng-if和ng-show区别"></a>ng-if和ng-show区别</h3><p>ng-if 为true 才创建dom节点，ng-show起始就创建了。用样式控制</p>
<p>ng-if 会隐式的产生新作用域，ng-switch，ng-include等会动态创建一块界面也是如此</p>
<h3 id="ng-repeat-迭代数组，有相同值"><a href="#ng-repeat-迭代数组，有相同值" class="headerlink" title="ng-repeat 迭代数组，有相同值"></a>ng-repeat 迭代数组，有相同值</h3><p>可以加<code>$track by $index</code>可以解决，也可以任何一个普通的值，只要能唯一标识数组中的每一项即可（建立dom和数据之间的关系）</p>
<h2 id="ng-click中写的表达式，能使用js原生对象上的方法，比如math-max之类的吗"><a href="#ng-click中写的表达式，能使用js原生对象上的方法，比如math-max之类的吗" class="headerlink" title="ng-click中写的表达式，能使用js原生对象上的方法，比如math.max之类的吗"></a>ng-click中写的表达式，能使用js原生对象上的方法，比如math.max之类的吗</h2><p>不可以。只要在页面中，就不能直接调用原生的js方法，因为这些并不属于在页面对应的controller的$scope,除非在$scope中添加这个函数</p>
<h2 id="下面这种表达实例，实现后面的参数通过什么方法自定义"><a href="#下面这种表达实例，实现后面的参数通过什么方法自定义" class="headerlink" title="下面这种表达实例，实现后面的参数通过什么方法自定义"></a>下面这种表达实例，实现后面的参数通过什么方法自定义</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;now | 'yyyy-mm-dd'&#125;&#125;</div><div class="line">`</div></pre></td></tr></table></figure>
<p>filter 有两种使用方法<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;now | data: 'yyyy-mm-dd'&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>另一种在js里面用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$filter(<span class="string">'date'</span>)(now, <span class="string">'yyyy-mm-dd'</span>)</div></pre></td></tr></table></figure>
<p>自定义<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">app.filter(<span class="string">'过滤器名字'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">需要过滤的对象,过滤参数,过滤参数</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> 处理后的对象</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="factory、service和provider是什么关系？"><a href="#factory、service和provider是什么关系？" class="headerlink" title="factory、service和provider是什么关系？"></a>factory、service和provider是什么关系？</h2><p>factory<br>把service的方法和数据放在一个对象里面，并返回一个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">app.factory(<span class="string">'FooService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">target</span>: <span class="string">'factory'</span>,</div><div class="line">        <span class="attr">sayHello</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">'hello '</span> + <span class="keyword">this</span>.target;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>service<br>通过构造函数方式创建service，返回一个实例化对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">app.service(<span class="string">'FooService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">this</span>.target = <span class="string">'service'</span>;</div><div class="line">    <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'hello '</span> + self.target;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>provider<br>创建一个可通过config配置的service,$get中返回的，就是用factory创建的service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">app.provider(<span class="string">'FooService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.configData = <span class="string">'init data'</span>;</div><div class="line">    <span class="keyword">this</span>.setConfigData = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(data)&#123;</div><div class="line">            <span class="keyword">this</span>.configData = data;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">this</span>.$get = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">target</span>: <span class="string">'provider'</span>,</div><div class="line">            <span class="attr">sayHello</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">return</span> self.configData + <span class="string">' hello '</span> + <span class="keyword">this</span>.target;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 此处注入的是 FooService 的 provider</span></div><div class="line">app.config(<span class="function"><span class="keyword">function</span>(<span class="params">FooServiceProvider</span>)</span>&#123;</div><div class="line">    FooServiceProvider.setConfigData(<span class="string">'config data'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>从底层实现来看，service调用了factory,返回其实例，factory调用了provider,返回其$get中定义的内容，</p>
<p>$factory和service功能类似，只不过factory是普通的函数，可以返回任何东西<br>service是构造器，可以不返回<br>provider是加强版的factory,返回一个可配置的factory</p>
<h2 id="rootscope和-scope的区别"><a href="#rootscope和-scope的区别" class="headerlink" title="$rootscope和$scope的区别"></a>$rootscope和$scope的区别</h2><p>$rootScope页面所有的$scope的父亲</p>
<p>angular 解析ng-app然后在内存中创建<code>$rootScope</code><br>angular会继续解析找到双括号表达式表达式，并解析变量</p>
<p>接着会解析带有ng-controller的div然后指向某个controller函数，这个时候在这个controller函数变成一个$scope对象的实例</p>
<h2 id="表达式是如何工作的"><a href="#表达式是如何工作的" class="headerlink" title="表达式是如何工作的"></a>表达式是如何工作的</h2><p>每出现一个双括号表达式就会设置一个$watch而$interpolation会返回一个带有上下文参数的函数，最后改函数执行，算是表达式$parse作用域上</p>
<h2 id="angular的digest周期"><a href="#angular的digest周期" class="headerlink" title="angular的digest周期"></a>angular的digest周期</h2><p>angular总会对比scope module的值，一般digest周期都是自动触发的，也可以使用$apply进行手动触发</p>
<h2 id="取消-timeout-停止-watch"><a href="#取消-timeout-停止-watch" class="headerlink" title="取消 $timeout,停止$watch"></a>取消 <code>$timeout</code>,停止<code>$watch</code></h2><p>取消<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$timeout.cancel(customTime)</div></pre></td></tr></table></figure></p>
<p>停止 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> deregisterWatchFn = $rootScope.$watch(<span class="string">'someGloballyAvailableProperty'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (newVal) &#123;</div><div class="line">    <span class="comment">// we invoke that deregistration function, to disable the watch</span></div><div class="line">    deregisterWatchFn();</div><div class="line">    </div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>要取消watch的话，一开始将$watch的返回值保存就好啦，要取消watch的时候，在调用。</p>
<h2 id="angular-directive中restrict中分别怎么设置"><a href="#angular-directive中restrict中分别怎么设置" class="headerlink" title="angular directive中restrict中分别怎么设置"></a>angular directive中restrict中分别怎么设置</h2><p>A 属性匹配<br>E 标签匹配<br>C class匹配<br>M 注释匹配</p>
<p>在scope中</p>
<p>@ 设置一个字符串<br>= 双向绑定<br>&amp; 用于执行父级scope上的一些表达式</p>
<h2 id="apply-和-digest的区别"><a href="#apply-和-digest的区别" class="headerlink" title="$apply 和 $digest的区别"></a>$apply 和 $digest的区别</h2><p>$apply 可以接收一个参数作为function，这个参数会被包装在try..catch中，一旦异常就会被$exceptionHandler service 处理</p>
<p>$apply会使ng进入$digest cycle,并从<code>$rootScope</code>开始遍历检查数据变更</p>
<p>$digest仅会检查scope和它的子scope</p>
<h2 id="写controller逻辑-需要注意"><a href="#写controller逻辑-需要注意" class="headerlink" title="写controller逻辑 需要注意"></a>写controller逻辑 需要注意</h2><p>简化代码</p>
<p>尽量减少dom节点操作，dom最好出现在指令中，angular提倡驱动开发，service或者controller中出现dom操作意味这，测试驱动无法通过，angular专注上相数据绑定，无需关系一对dom操作</p>
<h2 id="angular是mvc还是mvvm"><a href="#angular是mvc还是mvvm" class="headerlink" title="angular是mvc还是mvvm"></a>angular是mvc还是mvvm</h2><p>首先说明一下mvc 和 mvvm理解</p>
<p>为什么需要mvc,随着代码规模化，必须切分职责，方便后期的维护，修改一块功能，不能影响其他功能，也方便复用，mvc只是一种手段，终极目标的模块化和复用</p>
<p>mvvm的优点</p>
<p>低耦合 可复用  独立开发 可测试</p>
<p>angularjs的mvvm 模式分为四个部分</p>
<ul>
<li><p>view 专注界面的显示和渲染，在angular中则是包含一堆声明式的directive视图模板</p>
</li>
<li><p>viewModel 是view和model的粘合体，负责view和model的交互和协作，负责给view提供显示的数据，以及view中事件的操作</p>
</li>
<li><p>model  它是应用程序的业务逻辑相关的数据的封装载体，是业务领域的对象，model不会关心如何显示或操作，大部分model来自服务端返回数据或者全局配置<br>angualr的service则是封装和处理相关业务逻辑的场所</p>
</li>
<li><p>controller 它负责初始化viewModel，将组合一个或者多个service来获取业务领域model放在viewModel对象上，使得应用界面在启动加载的时候达到一种可用的状态</p>
</li>
</ul>
<h2 id="angularjs-核心"><a href="#angularjs-核心" class="headerlink" title="angularjs 核心"></a>angularjs 核心</h2><p> mvc  模块化  双向绑定  语义化标签 注入依赖</p>
<h2 id="directive中compile和link的区别"><a href="#directive中compile和link的区别" class="headerlink" title="directive中compile和link的区别"></a>directive中compile和link的区别</h2><p>使用compile函数可以改变原始的dom,在ng创建原始dom实例以及创建scope之前</p>
<p>可以应用于当需要生成多个element实例，compile函数阶段改变原始的dom生成多个原始dom节点,然后每个又生成element实例.因为compile只会运行一次,所以当你需要生成多个element实例的时候是可以提高性能的.</p>
<ul>
<li><p>pre-link 可以运行一些业务代码在ng执行完compile函数之后，但是在它所有子指令的post-link函数将要执行之前</p>
</li>
<li><p>post-link 来执行业务逻辑，这个阶段，它已经知道所有的子指令已经编译完成并且pre-link以及post-link函数已经执行完成</p>
</li>
</ul>
<p>当同时设置compile和link函数，compile所返回的函数当做link函数，而link选择本书则会被忽略，如果注释掉compile，link就起作用了 </p>
<h2 id="默认的angular路由中，-号怎么去掉"><a href="#默认的angular路由中，-号怎么去掉" class="headerlink" title="默认的angular路由中，#号怎么去掉"></a>默认的angular路由中，#号怎么去掉</h2><p>这个原因是因为angular框架提供一种html5模式的路由<br>可以设置$locationProvider<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$locationProvider.html5Mode(<span class="literal">true</span>)</div></pre></td></tr></table></figure></p>
<p>缺点是无法刷新，404<br>需要配置服务器来修复</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/angular/" rel="tag"># angular</a>
          
            <a href="/tags/问题，面试/" rel="tag"># 问题，面试</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/30/angularjs组件化开发/" rel="next" title="angularjs组件化开发">
                <i class="fa fa-chevron-left"></i> angularjs组件化开发
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/04/02/webpack/" rel="prev" title="webpack">
                webpack <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="mayufo" />
          <p class="site-author-name" itemprop="name">mayufo</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#angular的数据采用什么机制？-详述原理"><span class="nav-number">1.</span> <span class="nav-text">angular的数据采用什么机制？ 详述原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#两个平级界面a和b-如果a触发一个时间，有哪些方式能让b知道，详述原理"><span class="nav-number">2.</span> <span class="nav-text">两个平级界面a和b,如果a触发一个时间，有哪些方式能让b知道，详述原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#共用服务"><span class="nav-number">2.1.</span> <span class="nav-text">共用服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于事件"><span class="nav-number">2.2.</span> <span class="nav-text">基于事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EventBus-事件发布、订阅总线"><span class="nav-number">2.3.</span> <span class="nav-text">EventBus 事件发布、订阅总线</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一个angular应用应当如何良好的分层"><span class="nav-number">3.</span> <span class="nav-text">一个angular应用应当如何良好的分层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#angular应用常用那些路由库，各自的区别"><span class="nav-number">4.</span> <span class="nav-text">angular应用常用那些路由库，各自的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如果angular的directive规划一套全组件化体系，会遇到哪些挑战？"><span class="nav-number">5.</span> <span class="nav-text">如果angular的directive规划一套全组件化体系，会遇到哪些挑战？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分属不同团队进行开发的angular应用，如果要做整合，会遇到哪些问题，如何解决"><span class="nav-number">6.</span> <span class="nav-text">分属不同团队进行开发的angular应用，如果要做整合，会遇到哪些问题，如何解决</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#angular缺点有哪些？"><span class="nav-number">7.</span> <span class="nav-text">angular缺点有哪些？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#优化angular应用性能的办法"><span class="nav-number">8.</span> <span class="nav-text">优化angular应用性能的办法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何看待-controller-as-的语法"><span class="nav-number">9.</span> <span class="nav-text">如何看待 controller as 的语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#详述angular的依赖注入"><span class="nav-number">10.</span> <span class="nav-text">详述angular的依赖注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ng-if和ng-show区别"><span class="nav-number">10.1.</span> <span class="nav-text">ng-if和ng-show区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ng-repeat-迭代数组，有相同值"><span class="nav-number">10.2.</span> <span class="nav-text">ng-repeat 迭代数组，有相同值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ng-click中写的表达式，能使用js原生对象上的方法，比如math-max之类的吗"><span class="nav-number">11.</span> <span class="nav-text">ng-click中写的表达式，能使用js原生对象上的方法，比如math.max之类的吗</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下面这种表达实例，实现后面的参数通过什么方法自定义"><span class="nav-number">12.</span> <span class="nav-text">下面这种表达实例，实现后面的参数通过什么方法自定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#factory、service和provider是什么关系？"><span class="nav-number">13.</span> <span class="nav-text">factory、service和provider是什么关系？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rootscope和-scope的区别"><span class="nav-number">14.</span> <span class="nav-text">$rootscope和$scope的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表达式是如何工作的"><span class="nav-number">15.</span> <span class="nav-text">表达式是如何工作的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#angular的digest周期"><span class="nav-number">16.</span> <span class="nav-text">angular的digest周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#取消-timeout-停止-watch"><span class="nav-number">17.</span> <span class="nav-text">取消 $timeout,停止$watch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#angular-directive中restrict中分别怎么设置"><span class="nav-number">18.</span> <span class="nav-text">angular directive中restrict中分别怎么设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#apply-和-digest的区别"><span class="nav-number">19.</span> <span class="nav-text">$apply 和 $digest的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#写controller逻辑-需要注意"><span class="nav-number">20.</span> <span class="nav-text">写controller逻辑 需要注意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#angular是mvc还是mvvm"><span class="nav-number">21.</span> <span class="nav-text">angular是mvc还是mvvm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#angularjs-核心"><span class="nav-number">22.</span> <span class="nav-text">angularjs 核心</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#directive中compile和link的区别"><span class="nav-number">23.</span> <span class="nav-text">directive中compile和link的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#默认的angular路由中，-号怎么去掉"><span class="nav-number">24.</span> <span class="nav-text">默认的angular路由中，#号怎么去掉</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">mayufo</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


  

</body>
</html>
